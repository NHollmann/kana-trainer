(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,n){},17:function(t,e,n){},19:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(7),o=n.n(i),s=(n(15),n(1)),c=n(2),h=n(4),u=n(3),l=n(5),p=(n(17),n(19),function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"kana"},r.a.createElement("p",null,this.props.value))}}]),e}(a.Component)),f=n(8),v=(n(24),function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(h.a)(this,Object(u.a)(e).call(this,t))).state={text:""},n}return Object(l.a)(e,t),Object(c.a)(e,[{key:"onKeyDown",value:function(t,e,n){var a=this.state.text;"backspace"===t?a=a.slice(0,-1):"enter"===t||"space"===t?("function"===typeof this.props.onEnter&&this.props.onEnter(a),a=""):this.props.locked||(a+=t,this.props.onChange(a)&&(a="")),this.setState({text:a})}},{key:"render",value:function(){return r.a.createElement(f.a,{keyName:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,backspace,enter,space",onKeyDown:this.onKeyDown.bind(this)},r.a.createElement("p",{className:"output"},this.state.text,r.a.createElement("span",{className:"cursor"},"|")))}}]),e}(a.Component)),d=function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(u.a)(e).call(this,{n:"\u3093",a:"\u3042",i:"\u3044",u:"\u3046",e:"\u3048",o:"\u304a",ka:"\u304b",ki:"\u304d",ku:"\u304f",ke:"\u3051",ko:"\u3053",sa:"\u3055",shi:"\u3057",su:"\u3059",se:"\u305b",so:"\u305d",ta:"\u305f",chi:"\u3061",tsu:"\u3064",te:"\u3066",to:"\u3068",na:"\u306a",ni:"\u306b",nu:"\u306c",ne:"\u306d",no:"\u306e",ha:"\u306f",hi:"\u3072",fu:"\u3075",he:"\u3078",ho:"\u307b",ma:"\u307e",mi:"\u307f",mu:"\u3080",me:"\u3081",mo:"\u3082",ya:"\u3084",yu:"\u3086",yo:"\u3088",ra:"\u3089",ri:"\u308a",ru:"\u308b",re:"\u308c",ro:"\u308d",wa:"\u308f",wi:"\u3090",we:"\u3091",wo:"\u3092"}))}return Object(l.a)(e,t),e}(function(){function t(e){for(var n in Object(s.a)(this,t),this.map=e,this.reverseMap={},e)this.reverseMap[this.map[n]]=n}return Object(c.a)(t,[{key:"getByTranscription",value:function(t){return t in this.map?this.map[t]:(console.warn("Trying to access non existent transcription."),"\u274c")}},{key:"getByKana",value:function(t){return this.reverseMap[t]?this.reverseMap[t]:(console.warn("Trying to access non existent kana."),"\u274c")}}]),t}()),g=function(){function t(){Object(s.a)(this,t)}return Object(c.a)(t,null,[{key:"calculateWeights",value:function(t){for(var e=0,n=[],a=0;a<t.length;a++)e+=t[a];for(var r=0;r<t.length;r++)n.push(t[r]/e);return n}},{key:"getRandomIdByDistribution",value:function(t){for(var e=0,n=Math.random();n>0;)n-=t[e],e++;return--e}},{key:"getRandomIdByWeights",value:function(e){var n=t.calculateWeights(e);return t.getRandomIdByDistribution(n)}},{key:"getRandom",value:function(t){return t[Math.floor(Math.random()*t.length)]}}]),t}(),m=[["ka","ki","ku","ke","ko"],["sa","shi","su","se","so"],["ta","chi","tsu","te","to"],["na","ni","nu","ne","no"],["ha","hi","fu","he","ho"],["ma","mi","mu","me","mo"],["ya","yu","yo"],["ra","ri","ru","re","ro"],["wa","wi","we","wo"]],y=function(t){function e(t){var n;Object(s.a)(this,e);var a=[{transcription:"n",solved:0},{transcription:"a",solved:0},{transcription:"e",solved:0},{transcription:"i",solved:0},{transcription:"o",solved:0},{transcription:"u",solved:0}];(n=Object(h.a)(this,Object(u.a)(e).call(this,t))).hiragana=new d;try{n.characters=JSON.parse(localStorage.getItem("hiragana"))||a}catch(i){n.characters=a}n.positive=["\ud83d\udc4d\ud83c\udffb","\ud83c\udf7b","\ud83e\udd42","\ud83c\udfc6","\ud83c\udfc5","\u2705","\ud83c\udd97","\ud83c\udf56","\ud83c\udfaf","\ud83c\udf89","\ud83c\udf8a"],n.negative=["\u274c","\ud83d\ude26","\ud83e\uddb4","\u274c","\ud83d\uded1","\u26d4\ufe0f","\ud83d\udeab","\u2049\ufe0f","\u26a0\ufe0f","\u2620\ufe0f"];var r=n.getRandomKana();return n.state={symbol:n.hiragana.getByTranscription(r),transcription:r,message:"What is the transcription for:",state:"waiting"},n}return Object(l.a)(e,t),Object(c.a)(e,[{key:"kanaSolved",value:function(){var t=this,e=this.characters.findIndex(function(e){return e.transcription===t.state.transcription});if(this.characters[e].solved++,this.totalSolved()/this.characters.length>=Math.floor(1.25*this.characters.length)){var n;try{n=JSON.parse(localStorage.getItem("hiraganaBlock")||"0")}catch(r){n=0}if(n<m.length){var a=m[n].map(function(t){return{transcription:t,solved:0}});this.characters=this.characters.concat(a),n++,localStorage.setItem("hiraganaBlock",n)}}localStorage.setItem("hiragana",JSON.stringify(this.characters))}},{key:"totalSolved",value:function(){return this.characters.reduce(function(t,e){return t+e.solved},0)}},{key:"calculateWeights",value:function(){var t=this.totalSolved();return this.characters.map(function(e){return 0===t?1:0===e.solved?2*t:t/e.solved})}},{key:"getRandomKana",value:function(){var t=this.calculateWeights(),e=0,n=0;do{e=g.getRandomIdByWeights(t),n++}while(n<5&&this.state&&this.state.transcription===this.characters[e].transcription);return this.characters[e].transcription}},{key:"onTyperChange",value:function(t){return t.length>=1&&t===this.state.transcription&&(this.onTyperEnter(t),!0)}},{key:"onTyperEnter",value:function(t){var e=this;if("waiting"===this.state.state)t===this.state.transcription?(this.kanaSolved(),this.setState({message:"You're right! It was \""+this.state.transcription+'".',state:"next",symbol:g.getRandom(this.positive)})):this.setState({message:"Wrong! "+this.state.symbol+' would be "'+this.state.transcription+'"',state:"next",symbol:g.getRandom(this.negative)}),window.setTimeout(function(){e.onTyperEnter("")},700);else{var n=this.getRandomKana();this.setState({message:"What is the transcription for:",state:"waiting",transcription:n,symbol:this.hiragana.getByTranscription(n)})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,this.state.message),r.a.createElement(p,{value:this.state.symbol}),r.a.createElement(v,{locked:"next"===this.state.state,onChange:this.onTyperChange.bind(this),onEnter:this.onTyperEnter.bind(this)}))}}]),e}(a.Component),b=function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null))}}]),e}(a.Component),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}o.a.render(r.a.createElement(b,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/kana-trainer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/kana-trainer","/service-worker.js");k?(function(t,e){fetch(t).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):w(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):w(e,t)})}}()},9:function(t,e,n){t.exports=n(26)}},[[9,2,1]]]);
//# sourceMappingURL=main.a02b4fb6.chunk.js.map