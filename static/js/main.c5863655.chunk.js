(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,a){},17:function(t,e,a){},19:function(t,e,a){},24:function(t,e,a){},26:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(7),s=a.n(i),o=(a(15),a(1)),c=a(2),u=a(4),h=a(3),l=a(5),p=(a(17),a(19),function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"kana"},r.a.createElement("p",null,this.props.value))}}]),e}(n.Component)),m=a(8),v=(a(24),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).state={text:""},a}return Object(l.a)(e,t),Object(c.a)(e,[{key:"onKeyDown",value:function(t,e,a){var n=this.state.text;"backspace"===t?n=n.slice(0,-1):"enter"===t||"space"===t?("function"===typeof this.props.onEnter&&this.props.onEnter(n),n=""):this.props.locked||(n+=t),this.setState({text:n})}},{key:"render",value:function(){return r.a.createElement(m.a,{keyName:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,backspace,enter,space",onKeyDown:this.onKeyDown.bind(this)},r.a.createElement("p",{className:"output"},this.state.text,r.a.createElement("span",{className:"cursor"},"|")))}}]),e}(n.Component)),f=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).call(this,{n:"\u3093",a:"\u3042",i:"\u3044",u:"\u3046",e:"\u3048",o:"\u304a",ka:"\u304b",ki:"\u304d",ku:"\u304f",ke:"\u3051",ko:"\u3053",sa:"\u3055",shi:"\u3057",su:"\u3059",se:"\u305b",so:"\u305d",ta:"\u305f",chi:"\u3061",tsu:"\u3064",te:"\u3066",to:"\u3068",na:"\u306a",ni:"\u306b",nu:"\u306c",ne:"\u306d",no:"\u306e",ha:"\u306f",hi:"\u3072",fu:"\u3075",he:"\u3078",ho:"\u307b",ma:"\u307e",mi:"\u307f",mu:"\u3080",me:"\u3081",mo:"\u3082",ya:"\u3084",yu:"\u3086",yo:"\u3088",ra:"\u3089",ri:"\u308a",ru:"\u308b",re:"\u308c",ro:"\u308d",wa:"\u308f",wi:"\u3090",we:"\u3091",wo:"\u3092"}))}return Object(l.a)(e,t),e}(function(){function t(e){for(var a in Object(o.a)(this,t),this.map=e,this.reverseMap={},e)this.reverseMap[this.map[a]]=a}return Object(c.a)(t,[{key:"getByTranscription",value:function(t){return t in this.map?this.map[t]:(console.warn("Trying to access non existent transcription."),"\u274c")}},{key:"getByKana",value:function(t){return this.reverseMap[t]?this.reverseMap[t]:(console.warn("Trying to access non existent kana."),"\u274c")}}]),t}()),g=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,null,[{key:"calculateWeights",value:function(t){for(var e=0,a=[],n=0;n<t.length;n++)e+=t[n];for(var r=0;r<t.length;r++)a.push(t[r]/e);return a}},{key:"getRandomIdByDistribution",value:function(t){for(var e=0,a=Math.random();a>0;)a-=t[e],e++;return--e}},{key:"getRandomIdByWeights",value:function(e){var a=t.calculateWeights(e);return t.getRandomIdByDistribution(a)}},{key:"getRandom",value:function(t){return t[Math.floor(Math.random()*t.length)]}}]),t}(),d=[["ka","ki","ku","ke","ko"],["sa","shi","su","se","so"],["ta","chi","tsu","te","to"],["na","ni","nu","ne","no"],["ha","hi","fu","he","ho"],["ma","mi","mu","me","mo"],["ya","yu","yo"],["ra","ri","ru","re","ro"],["wa","wi","we","wo"]],y=function(t){function e(t){var a;Object(o.a)(this,e);var n=[{transcription:"n",solved:0},{transcription:"a",solved:0},{transcription:"e",solved:0},{transcription:"i",solved:0},{transcription:"o",solved:0},{transcription:"u",solved:0}];(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).hiragana=new f;try{a.characters=JSON.parse(localStorage.getItem("hiragana"))||n}catch(i){a.characters=n}a.positive=["\ud83d\udc4d\ud83c\udffb","\ud83c\udf7b","\ud83e\udd42","\ud83c\udfc6","\ud83c\udfc5","\u2705","\ud83c\udd97","\ud83c\udf56","\ud83c\udfaf","\ud83c\udf89","\ud83c\udf8a"],a.negative=["\u274c","\ud83d\ude26","\ud83e\uddb4","\u274c","\ud83d\uded1","\u26d4\ufe0f","\ud83d\udeab","\u2049\ufe0f","\u26a0\ufe0f","\u2620\ufe0f"];var r=a.getRandomKana();return a.state={symbol:a.hiragana.getByTranscription(r),transcription:r,message:"What is the transcription for:",state:"waiting"},a}return Object(l.a)(e,t),Object(c.a)(e,[{key:"kanaSolved",value:function(){var t=this,e=this.characters.findIndex(function(e){return e.transcription===t.state.transcription});if(this.characters[e].solved++,this.totalSolved()/this.characters.length>=Math.floor(1.25*this.characters.length)){var a;try{a=JSON.parse(localStorage.getItem("hiraganaBlock")||"0")}catch(r){a=0}if(a<d.length){var n=d[a].map(function(t){return{transcription:t,solved:0}});this.characters=this.characters.concat(n),a++,localStorage.setItem("hiraganaBlock",a)}}localStorage.setItem("hiragana",JSON.stringify(this.characters))}},{key:"totalSolved",value:function(){return this.characters.reduce(function(t,e){return t+e.solved},0)}},{key:"calculateWeights",value:function(){var t=this.totalSolved();return this.characters.map(function(e){return 0===t?1:0===e.solved?2*t:t/e.solved})}},{key:"getRandomKana",value:function(){var t=this.calculateWeights(),e=0,a=0;do{e=g.getRandomIdByWeights(t),a++}while(a<5&&this.state&&this.state.transcription===this.characters[e].transcription);return this.characters[e].transcription}},{key:"onTyperEnter",value:function(t){if("waiting"===this.state.state)t===this.state.transcription?(this.kanaSolved(),this.setState({message:"You're right!",state:"next",symbol:g.getRandom(this.positive)})):this.setState({message:"Wrong! "+this.state.symbol+' would be "'+this.state.transcription+'"',state:"next",symbol:g.getRandom(this.negative)});else{var e=this.getRandomKana();this.setState({message:"What is the transcription for:",state:"waiting",transcription:e,symbol:this.hiragana.getByTranscription(e)})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,this.state.message),r.a.createElement(p,{value:this.state.symbol}),r.a.createElement(v,{locked:"next"===this.state.state,onEnter:this.onTyperEnter.bind(this)}))}}]),e}(n.Component),b=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null))}}]),e}(n.Component);s.a.render(r.a.createElement(b,null),document.getElementById("root"))},9:function(t,e,a){t.exports=a(26)}},[[9,2,1]]]);
//# sourceMappingURL=main.c5863655.chunk.js.map